"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.get=exports.post=void 0;var _axios=_interopRequireDefault(require("axios"));var _reactNative=require("react-native");var RootNavigation=_interopRequireWildcard(require("../RootNavigation"));var _asyncStorage=_interopRequireDefault(require("@react-native-community/async-storage"));var _types=require("./types");var post=function post(url,params,dispatch,start,success,faild){var method=url.split('/').pop();dispatch({type:start});(0,_axios["default"])({method:'post',url:url,data:params,headers:{authorization:'Bearer '.concat(_types.USER.token)}}).then(function(response){dispatch({type:success,payload:method=='removeCharacter'?params.id:response.data});if(method=='login'||method=='register'){RootNavigation.replace('Feed');_types.USER.token=response.data.token;_asyncStorage["default"].setItem(_types.LOCAL_AUTH_ID,response.data.token);}})["catch"](function(err){console.log('Gelen POST Hatalı: => ',err.response.data);_reactNative.Alert.alert('UYARI',err.response.data.message);dispatch({type:faild});});};exports.post=post;var get=function get(url,params,dispatch,start,success,faild){console.log('Giden URL => ',url);var method=url.split('/').pop();console.log('Method => ',method);dispatch({type:start});(0,_axios["default"])({method:'get',url:url,headers:{authorization:'Bearer '.concat(_types.USER.token)}}).then(function(response){console.log('Gelen GET Başarılı: => ',response.data);dispatch({type:success,payload:response.data});})["catch"](function(err){console.log('Gelen GET Hatalı: => ',err);_reactNative.Alert.alert('UYARI','İstek sırasında bir sorun oluştu!');dispatch({type:faild});});};exports.get=get;